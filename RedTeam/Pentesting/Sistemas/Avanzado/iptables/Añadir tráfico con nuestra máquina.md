-----
- Tags #teoria #practica #avanzado 
- ------

# Iptables 

**Iptables** es una herramienta avanzada de friltrado de paquetes en Linux. Se encarga de analizar cada uno de los paquetes del tráfico de red entrante y deicid, en función de un conjunto de reglas, qué hacer con cada paquete recibido.

-----

# Configurar reglas para permitir conexión 

De cara a auditorías que estemos realizando, nos podríamos encontrar con el caso en donde hayan reglas de firewall e iptables conifugaradas evitando así que podamos por ejemplo, entablar una **reverse shell** o una **bind shell**, obviamente ante estas situaciones podemos pensar en una **Forward shell**, pero en caso de que contemos con [[RCE - (Remote Command Execution)]] como root mediante por ejemplo, una **fakeshell**, podríamos intentar retocar las reglas de iptables para configurar la conexión exitosa entre nuestra máquina de atacantes contra la máquina victima. 

```bash
iptables -A INPUT -p tcp -d {our_ip} -j ACCEPT
```

Esta regla se aplica al tráfico entrante (INPUT) en el protocolo TCP que está destinado a la dirección IP especificada. Con esta regla permitimos que el tráfico TCP que entra a la máquina victima proveniente de nuestra máquina de atacantes sea aceptado y llegue al sistema. 

```bash
iptables -A OUTPUT -p tcp -d {our_ip} -j ACCEPT
```

Esta regla se aplica al tráfico saliente (OUTPUT) en el protocolo TCP que tiene como destino la dirección especificada. Con esta regla permitimos que el tráfico TPC saliente hacia nuestra máquina de atacantes sea aceptado y salga del sistema. 

