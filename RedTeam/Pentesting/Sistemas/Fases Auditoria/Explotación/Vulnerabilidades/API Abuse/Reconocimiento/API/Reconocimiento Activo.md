----
- Tags: #ataques #teoria #practica
----
# Reconocimiento Activo
### El **reconocimiento activo** es el proceso de interactuar directamente con el target principalmente mediante el uso de escaneos. Usaremos el reconocimiento para buscar las API del target y cualquier información útil. 
### Durante este proceso, se realizaran escaneos de sistemas, puertos, investigar servicios HTTP, etc. Es posible que encontremos APIs anuncaidas para los usuarios finales o que haya que profundisar más. Para esto se puede hacer uso de herramientas como [[Nmap]], **OWASP Amass**, **gobuster**, **kiterunner** y **DevTools**. 

-----
# [[Nmap]]
### Como sabemos **nmap** es una herramienta muy utilizada y popular a la hora de apliar reconocimiento de cara a auditorias, la misma sirve para obtener información acerca de los puertos, servicios, sistemas, entre otras cuestiones, de los sistemas targets que podemos estar auditando.

-----
# OWASP Amass 
### **Amass** es una herramienta desarrollada por OWASP la cual sirve para mapear los activos externos mediante técnicas de [[Reconocimiento Pasivo]] y **activo**. Es una herramienta de **command-line** que puede mapear la red externa de un target recopilando SOINT de más de 55 fuentes diferentes. Puede ser configurada para realizar escaneos pasivos o  activos. Si se elige la opción activa, Amass recopilará información directamente del target solicitando la información de su certificado. De lo contrario, recopila datos de motores de búsqueda (Como Google, Bing y HackerOne), fuentes de ceritficados SSL (Como GoogleCT, CXensys y FacebookCT), APIs de búsquedas (Como Shodan, AlienVault, Cloudflare y GitHub) y el archivo **Web Wayback**. 

```bash
amass 
# Correr la herramienta

amass enum -list
# Enumerar la fuente de datos que están disponibles en Amass (Free y Paid)

amass enum -active -d {domain}
# Enumerar un dominio de forma activa

amass enum -active -brute -w {wordlist} -d {domain} -dir {directory_name}
```
### Es importante tener en cuenta que así como muchas fuentes de datos estan disponibles, muchas otras no, las cuales apareceran sin un '**\***' a la hora de ejecutar `amass enum -list`,  y es importante tener en cuenta que las mismas se pueden agregar para estar disponibles.

------
# Gobuster
### Como sabemos y se puede encontrar en [[Fase de Reconocimiento]], **gobuster** es una herramienta que nos permite realizar fuerza bruta, también denominada **fuzzing**, para efectuar esta contra urls, en este caso de APIs.

```gobuster
gobuster dir -u {url} -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt --wildcard
```

----
# Kiterunner 
### **Kiterunner** es una herramienta utilizada para el descubrimiento de endpoints y recursos API. Si bien herramientas como **gobuster**, **ffuf**, **wfuzz**, funcionan para descubrir rutas URL, normalmente se basan en solicitudes HTTP GET estándars. Kiterunner no solo utilizará todos los métodos de solicitud HTTP comunes con las API (GET, POST, PUT y DELETE), si no qeu también imitará las estructuras de la ruta API comunes. 

```bash
# Instalación
sudo git clone https://github.com/asswtnote/kiterunner.git
cd kiterunner
sudo make build
 
# Escaneo rápido
kr scan {url} -w {wordlist.kite}
kr brute {url} -w {wordlist.txt}
```
### Una característica interesante de **Kiterunner** es la capacidad de reproducir solicitudes. Por lo tanto, no sólo obtendremos un resultado interesante, si no que también podremos analizar por qué esa solicitud es interesante.

-----
# DevTools
### **DevTools** contiene algunas herrameintas de pirateŕia de aplicaciones muy subestimadas. Nos referimos a esto con el apartado de herramientas que podemos utilizar al clieckear *F12* en el navegador o msimo *Ctrl + shift + c*. Podemos utilizar la herramienta de **filtro** para buscar terminos como **api**, **v1**, **graphql**, etc. Esta es una forma rápida de encontrar endpoints de APIs en uso. También se puede dejar abierta le pestaña de **red** mientras se realizan acciones en la paǵina para poder ir viendo todo el flujo de peticiones que se transmiten por detras, de esta manera podríamos ver solicitudes a endpoints de APIs, etc.

![[devtools_network.png]]
### Esto nos permitirá verificar las solicitudes, editar los Headers/Body de las mismas, etc. Estas pueden ser utilizadas para migrar las peticiones a **curl**, **powershell**, entre otras.

![[devtools_export_requests.png]]
### Si copiamos en formato curl, el mismo se puede utilizar para importar la solicitud como "Raw test" en [[Postman]]. 
