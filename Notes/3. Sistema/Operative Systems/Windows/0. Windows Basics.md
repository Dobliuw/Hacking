# Windows Versions

Debido a la peculiar manera de Microsoft de nombrar las distintas versiones de su sistema operativo, puede ser bastante complejo entender ante que sistema nos estamos enfrentando, por lo que a continuación se adjunta una de las distintas versions de Windows Desktop y Windows Servers. [[0.1 Windows Versions]].

----
# Estructura de directorios 

Como sabemos, en informática un **Directory Structure** o **Estructura de Directorios** es la manera en la que el sistema operativo organiza archivos para que son accesibles al usuario. Mayormente esta organización se da en [jerarquía de estructura de árbol](https://en.wikipedia.org/wiki/Tree_structure). 

En CP/M, DOS, Windows y OS/2, el directorio root es `"drive:\"`, por ejemplo, en sistemas modernos, el directorio root es mayormente `"C:\"`. El directorio es usualmente sepadao por `\`, pero muchos sistemas operativos internamente reconocen el `/`. Unidades virtuales y fisicas son llamadas por una letra de unidad, en lugar de combinarse como una sola, lo que indica que las unidades no se combinan para formar una única secuencia de letras de unidad, cada dispositivo o ubicación se representa con su propia letra de unidad independiente.

A partir de Windows 10 la estructura de directorios que puede aparecer en la raíz de una paritción de inicio es:

- `\PerfLogs`: Puede almacenar registros de renfimiento de Windows, pero en una configuración por default, estará vacío.

- `\Program Files`: 
	- En *arquitecturas de 32 bits* todos los programas (16-bit y 32-bit) serán instalados en esta carpeta.
	- En *arquitecturas de 64 bits* todos los programas de 64-bit serán instalados en esta carpeta.

- `\Program Files (x86)`: Este directorio aparece en *arquitecturas de 64 bits* de Windows. Aquellos programas de 32-bit o 16-bit serán instalados por defecto en esta carpeta, incluso aunque los programas de 16 bits no se ejecutan en WIndows de 64 bits.

- `\ProgramData` *(Hidden)*: Almacena datos compartidos entre cuentas de usuario, esto puede inlcuir archivos de configuración, datos de aplicaciones, plantilas, etc. Aunque los datos están destinados a ser compartidos, no todos los datos dentro de este directorio son accesibles para todos los usarios sin limitación de privilegios.

- `\Users`: Carpeta que almacena carpetas con los perfiles de usuarios. Esta carpeta contiene una subcarpeta por cada usuario que se ha logueado en el sistema almenos una vez. Además, posee otras dos carpetas, `Public` y `Default` *(Hidden)*. También tienen dos elementos similares a carpetas llamadas `Default User` (Un punto de unión NTFs a la carpeta `Default`) y `All Users` (Un enlace simbólico NTFS a `C:\ProgramData`). 
	- Tanto un *NTFS junction piont* (*Punto de union NTFS*) como un *simbolick link NTFS* (*Enlace simbólico NTFS*) son características del sistema de archivos **NTFS** (**New Technology File System**) de Windows que permite crear referencias a directorios o archivos en otras ubicaciones del sistema de archivos. Sin embargo tiene algunas diferencias importantes:
		- **Junction Point NTFS**:  Es un tipo de enlace que permite a un directorio ser montado en otro punto dentro del mismo volumen NTFS. Es decir, el contenido del directorio montado se muestra dentro del directorio de destino como si fuera parte de él. A su vez, este es transparente para las aplicaciones, lo que quiere decir que las apps que acceden a este directorio no son conscientes de que están accediendo a un *junction point*. Es importante tener en cuenta que estos no pueden vincular directorios entre diferentes unidades o volúmenes. `mklink /J {name_of_new_folder_junction} {path_target_to_aim}`
		- **Symbolick Links NTFS**: Es un tipo de enlace que permite apuntar a archivos o directorios, y puede atraves volúmenes, lo que significa que puede vincular elementos entre diferentes unidades o volúmenes. `mklink /H {name_of_new_symbolick_link_file} {path_target_to_aim_file}` (Usar `/D` para directorios)
La diferencia entre un *junction point* de un *symbolick link* de tipo directorio es que el primero se usa específicamente para montar un directorio dentro de otro, este a su vez no puede atravesar volumenes y existe desde versiones anteriores de Windows 2000.


- `\Public`:  Esta carpeta sirve como un buffer para compartir archivos entre usuarios de una computadora. Por defecto esta carpeta es accesible para todos los usuarios que puedan iniciar sesión. También, por defecto, esta carpeta se comparte a través de la red, aunque se deniega el acceso anónimo. Esta carpeta contiene datos del usuario y no datos del programa, lo que siginifica que los usuarios sean los únicos que decida qué hay en esta carpeta y cómo se organiza. 

- `{username}\AppData` *(Hidden)*: Esta carpeta almacena datos y configuraciones de aplicaciones instaladas por el usuario.  Esta carpeta contiene tres subcarpetas: `Roaming`, `Local` y `LocalLow`.
	- `Roaming`: Almacena datos específicos de aplicaciones que son relevantes para el usuario en diferentes equipos o dispositivos de red. Estos datos se sincornizan esntre diferentes equipos en los que el usuario inicie sesión, lo que permite una experiencia coherente en múltiples dispostivios. Las aplicaciones pueden usar esta carpeta para almacenar configuraciones, datos de usuario y otra información que debe estar disponible en todos los dispositivos donde el usuario inicie sesión.
	- `Local`: Contiene datos específicos de las aplicaciones que son relevantes solo para el usuario actual. Estos datos pueden inlcuir cachés de aplicaciones, datos temporales y otra información que no se sincroniza ni se comparte con otros usuairos del mismo equipo  ocon otros dispositivos.
	- `LocalLow`: Similar a *Local*, pero generalmente utilizada por aplicaciones que requiere permisos limitados o tienen restricciones de seguridad más estrcitas. Las aplicaciones suelen almacenar datos en está cunado necesitan acceder a recursos en un nivel de integridad más bajo, como aplicaciones basadas en Internet Explorer y algunos juegos.

- `\Windows`: Windows en si mismo será instalado dentro de esta carpeta.
	- `\System`: Este subdirectorio de `C:\Windows` almacena DLLs para archivos de 16-bits, lo que indicá que esta carpeta estará vacia en sistemas de 64 bits.
	- `\System32`: En este caso almacena archivos del sistema operativos Windows de 32 bits escenciales para el funcionamiento del sistema. Aquió se encuentran muchas de las bibliotecas de enlace dinámico (DLL) y otros archivos fundamentales para el sistema operativo.
	- `\SysWOW64`: En *arquitecturas de 64 bits* contiene archivos del sistema operativo de 32 bits necesarios para la compatibilidad con aplicaciones de 32 bits. WOW significa *Windows on Windows* y se refeiere al subsitema de 32 bits en sistemas de 64 bits.

- `WinSxS`: Esta carpeta es oficialmente llamada **Windows Component Store** y constituye la mayoria de Windows. Una copia de todos los comonentes de WIndows, como todas las actualizaciones de Windows y los *service packs* son almacenados en esta carpeta. Empezando por Windows 7 y Windows Server 2008 R2, Windows automaticamente busca esta carpeta para mantener su tamaño. Por razones de seugridad y para evitar el problema [DLL Hell](https://en.wikipedia.org/wiki/DLL_Hell), Windows impone requisitos muy estrcitos sobre cómo se organizan los archivos en esta carpeta.

[Fuente parcial utilizada para esta sección.](https://en.wikipedia.org/wiki/Directory_structure#cite_note-7)

---
# Windows Network

Windows permite la creación de redes para compartir recursos y facilitar la colaboración entre usuarios, existen casi principalmente dos maneras de estructurar una red Windows. Una es usando un tipo de modelo *server-client* llamado *Domain* y otra es a través del tipo *peer-to-peer* denominado modelo *Worksgroup*.
###### Worksgroup

El modelo *peer-to-peer* (*P2P*) es una estrcutura de rde en la que todas las computadoras conectadas tiene igual autoridad y pueden actuar tnato como cliente como servidor. En el contexto de Windows, este modelo se implementa a través de lo que se conoce como un **Workgroup**.

- **Igualdad entre hosts**: Todos los hosts en el Workgroup tiene roles similares y no hay un servidor centralizado.
- **Recursos compartidos**: Los hosts pueden compartir recursos como archivos, impresoras y dispositivos de almacenamiento directamente entre sí sin depender de un servidor central.
- **Autenticación local**: Cada host tiene su propia base de datos de cuentas de usuario y se autentica localmente. Esto significa que no hay un controlador de dominio central para administrar las cuentas de usuario y las políticas de seguridad.
- **Configuración más simple**: El modelo de Workgroup es más fácil de configurar y mantener en comparación con un dominio, especialmente para redes pequeñas y domésticas.

###### Windows Domain

Windows domain es un modelo de tipo *server-client* de red en el que los hosts y los usuarios están centralizados y administrados por un servidor central llamado *Domain Controller*. 

- **Domain Controller**: Hay almenos un servidor dedicado que actúa como controlador de dominio. Este servidor contiene una base de datos centralizada de cuentas de usuario, grupos, políticas de seguridad y otros objetos de red.
- **Autenticación Centralizada**: Todos los uaurios y hosts de la red se autentican con el DC central antes de acceder a los recursos de red. Esto permite una gestión centralizada de la autenticación y la aplicación de políticas de seguridad.
- **Gestión de Políticas de Grupo (GPO)**: Se pueden aplicar políticas de grupo a usuarios y hosts en toda la red para controlar el acceso, la configuración del sistema y otras configuraciones.
- **Recursos Compartidos Centralizados**: Los recusos de red como archivos, impresoras y aplicaciones pueden ser compartidos y administrados centralmente a através del DC.
- **Escalabilidad y Seguridad**: El modelo de dominio es altamente escalable y ofrece un mayor nivel de seguridad y control en comparación con un Workgroup. Permite una gestión más granular de los recursos y el acceso a la red.

Una red de hosts Windows con un modelo de dominio se puede gestionar utilizando *Active Directory*, este es un servicio de directorio de Microsoft que se utiliza para administrar y organizar los recursos de red en un entorno de dominio de Windows.

Algunas maneras de validar si nuestro Host pertenece a un dominio es con los comandos:

```powershell
echo %loginServer%
# Esto devolvera el nombre del servidor contra el que nos autenticamos tras el inicio de sesión
# en caso de pertener a un dominio veríamos posiblemente el nombre del DC que suele tener DC en el nombre.
net config workstation
# Muestra la información de configuración de la workstation, incluido el nombre de domino al que está unido el sistema.
systeminfo
# Muestra gran cantidad de información de nuestro sistema, incluyendo el "Registered Organization" (Domain)
whoami /all 
# Muestra información detallada del usuario en uso incluyendo el nombre de dominio y grupo de seguridad 
dsquery * -limit 0
# Este comando puede utlilizarse para consultar objetos en un Active Directory, si este comando devuelve resultados
# es una manera potencial de reconocer nuestra pertenencia a un AD.
```