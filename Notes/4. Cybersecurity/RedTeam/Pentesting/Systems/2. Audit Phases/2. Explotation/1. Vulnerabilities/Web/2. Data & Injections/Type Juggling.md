# What is Type Juggling?

Un ataque de **Type Juggling** es una técnica utilizada en porgramación para **manipular** el **tipo de dato** de una variable con el fin de engañar a un programa y hacer que éste haga algo que no debería. 

La mayoría de los lenguajes de programación utilizan tipos de datos para clasificar la información almacenada en una varibale, como enteros, cadenas, flotantes, booleantos, etc. Los programas utilizan estos tipos de datos para realizar operanciones matemáticas, comparaciones y otras tareas especifícas. Sin embargo, los atacantes puede explotar vulnerabilidades en los programas que no validan adecuadamente los tipos de datos que se les proporcionan.

En un ataque de **Type Juggling**, un atacante manipula los datos de entrada del programa para cambiar el tipo de dato de una variable. Por ejemplo, el atacante podría proporcionar una cadena de caracteres que "se parece" a un número entero, pero que en realidad no lo es. Si el programa no valida adecuadamente el tipo de dato de la variable, podría intentar realizar operaciones matemáticas en esa variable y obtener resultados inesperados. 

----
# Explotation

Por ejemplo, en PHP, una cadena que comienza con un número se convierte automáticamente en un número se se utiliza en una comparación númerica. Por lo tanto, si el atacante proporciona una cadena que comienza con el número **0**, como **00123**, el programa convertirá en el número entero **123**. 

```php
$num = 10; 
$str_num = '10'; 
if($num == $str_num){ echo "Los valores son iguales"}
// Esto se mostrara en consola ya que "son iguales"
$str_num = '000000010'; 
if($num == $str_num){ echo "Los valores son iguales"}
// Esto se volvera a mostrar en consola ya que vuelven a "ser iguales"
```

Esto también se podría ver con manipulaciones de hashes **md5** en php, por ejemplo si tenemos una contraseña valida la cual es **240610708**, su hash md5 sería **0e4620974....**, pero si en el código se aplicase una doble comparación, podríamos ingresar una contraseña la cual su hash md5 también empiece con **0e....** (Como por ejemplo **QBKCDZO**), y al usar una doble comparativa, el hash md5 si interpreta como una potencia de **0** a la **4620974...** lo que da como resultado 0, por lo que la comparativa termina siendo **0\=\=0**

```php
$password = md5('240610708'); // 0e462097431906509019562988736854
$type_juggling = md5('QBKCDZO'); 
if($password == $type_juggling){ echo "Las credenciales son correctas."; } 
// Esto una vez más, se mostrara en consola. 
```

De cara a peticiones HTTP que se tramitan con un formato similar a **user={username}&pass={password}**, para acontecer un **Type Juggling** podríamos simplemente agregar unos corchetes *\[* *\]* en el dato que querramos cambiar por ejemplo **user={valid_username}&pass[]={invalid_password}**. 
