# ¿ Que es **Prototype Pollution** ? 

El ataque **prototype pollution** es una técnia de ataque que aprovecha las vulnerabilidades en la implementación de objetos en JavaScript. Esta técnica de ataque se utiliza para modificar la propiedad "**prototype**" de un objeto en una aplicación web, lo que puede permitir al atacante ejecutar código malicioso o manipular los datos de la aplicación. 

En JavaScript, la pripiedad "**prototype**" se utiliza para definir las propiedades y métodos de un objeto. Los atacantes pueden explotar esta caracteríestica de JavaScript para modificar las propiedades y métodos de un objeto y tomar el control de la aplicación. 

El ataque **prototype pollution** se produce cuando un atacante modifica la propiedad *prototype* de un objeto en una aplicación web. Esto se puede lograr mediantes la manipulación de datos qeu se envían a través de formularios o solicitudes AJAX, o mediante la inserción de código malicioso en el código JavaScript de la aplicación. 

Una vez que el objeto ha sido manipulado, el atacantes puede ejecutar código malicioso en la aplicación, manipular los datos de la misma o tomar el control de la sesión de un usuario. Por ejemplo, un atacante podría modificar la propiedad **prototype** de un objeto de autenticación de usuario para permitir el acceso a una cuenta sin la necesidad de una contraseña. 

----

# Explotación 

Como vimos anteriormente, con el ataque **prototype pollution** podemos modificar el **prototype** de un objeto, por ejemplo, supongamos que tenemos una web en donde para ver si el usuario es admin o no, existe una propiedad denominada *isAdmin*, el cual vale TRUE en caso de que el usuario sea administrador,  o no existe en caso de que no sea administrador. 

```javascript
const dobliuw = {
	name: "Dobliuw",
	age: 19,
};

const admin = {
	name: "Administrator",
	age: 45,
	isAdmin: true 
};

console.log(`El usuario ${admin.name} es administrador? ${admin.isAdmin}`); // El usuario Administrator es administrador? true.
console.log(`El usuario ${dobliuw.name} es administrador? ${dobliuw.isAdmin}`); // El usuario Dobliuw es administrador? undefined. 
```

En este ejemplo, podemos ver la estructura de dos usuarios diferentes con sus valores, ahora, al realizar un **prototype pollution** la cosa cambia rotundamente, ya que estamos alterando los metodos y propiedades del prototipo de los objetos de manera que podemos alterar los valores. 

```javascript
dobliuw.__proto__.isAdmin = "Prototype Pollution"

console.log(`El usuario ${admin.name} es administrador? ${admin.isAdmin}`); // El usuario Administrator es administrador? true.
console.log(`El usuario ${dobliuw.name} es administrador? ${dobliuw.isAdmin}`); // El usuario Dobliuw es administrador? Prototype Pollution. 
```

En este caso, como no existe la propiedad "isAdmin" dentro del usuario "dobliuw", podemos modificarla en el prototipo para que valga lo que querramos.  Esto es lo que ocurre en un ataque de **prototype pollution**, la manera de explotarla y el fin a darle puede variar dependiendo mucho las situaciones. 

