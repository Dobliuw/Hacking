----
- Tags: #ataques #basico #teoria #practica
----

# ¿ Que es una **API** ? 

Una **API (Aplication Program Interface)** es una pieza de código que permite a diferentes aplicaciones comunicarse entre si y compartir información y funcionalidades. Una **API** es un intermediario entre dos sistemas, que permite que una aplicación se comunique con otra y pida datos o acciones específicas.

----

# ¿ Que es el **Abuso de API's** ? 

Cuando hablamos del abuso de **API's**, a lo que nos referimos es a la **explotación de vulnerabilidades** en las interfaces de programación de aplicaciones (**API's**) que se utilizan para permitir la comunicación y el intercambio de datos entre diferentes aplicaciones y servicios en una red. 

Los endpoints de una **API** pueden aceptar diferentes métodos de solicitud, como GET, POST, PUT, DELETE. Los atacantes pueden utilizar herramientas de fuzzing para enviar una gran cantidad de solicitudes a un endpoint en busca de vulnerabilidades. Por ejemplo, un atacante podría enviar solicitudes GET a un endpoint para enumerar todos los recursos disponibles, o enviar sollicitudes POST para agregar o modificar datos. 

Algunas vulnerabilidades comunes que se pueden explotar a través del abuso de **API's** son: 

- ### [[SQLI - (SQL Injections)]]: Los atacantes pueden enviar datos maliciosos en las solicitudes para intentar inyectar código SQL en la base de datos subyacente. 
- ### [[CSRF - (Cross-Side Request Forgery)]]: Los atacantes pueden enviar solicitudes maliciosas a una **API** en nombre de un usuario autenticado para realizar acciones no autorizadas. 
- ### **Exposición de información confidencial**: Los atacantes pueden explorar los endpoints de una API para obtener información confidencial, como claves de API, contraseñas y nombre de usuario. 

------------

# Evitar estos ataques 

Para evitar el **abuso de API's**, los desarrolladores deben asegurarse de que la API esté diseñada de manera segura y que se validen y autentiquen adecuadamente todas las solicitudes entrantes. También es importante utilizar cifrado y autenticación fuertes para proteger los datos que se transmiten a través de la API. 

Los desarrolladores pueden utilizar herramientas como Postman para probar la API y detectar posibles vulnerabilidades antes de que sean explotadas por los atacantes. 

----

# Explotación 

A la hora de evaluar una posible explotación para una determinada API, podemos hacer uso de [[Postman]] para trabajar de manera ordenada con la API a la que nos enfrentemos, algunas cosas que se suelen probar son...

- ### Fuerza bruta a los Metodos aceptados para un mismo endpoint

```shell
ffuf -u {endpoint} -w /usr/share/SecLists/Fuzzing/http-request-methods.txt -X FUZZ 
```

Tambien algo a tener en cuenta es que *aveces* los endpoints admiten el metodo **OPTIONS** para de esta manera devolver en los headers de la respuesta los metodos permitidos para dicho endpoint:

![[allow_methods.png]]

- ### Si el endpoint tiene algun indicio de "version", como podria ser **v2** en el endpoint, ver otras posibles versiones. 
- ### Intentar ver si el endpoint puede ser comprometedor y migrar a un [[CSRF - (Cross-Side Request Forgery)]].
- ### Si se puede listar información del usuario privilegiada mediante leaks de otros endpoints, etc. 