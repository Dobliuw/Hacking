# DNS 

En caso de que no sepan que es **DNS** - **Domain Name Service**, se recomienda ver la sección de [[3. IP Addressing Services#Domain Name Service (DNS)]] en donde se entra en detalle en el funcionamiento de este protocolo.

----
# DNS Reconnaissance

Ahora bien, que es lo que nos interesa reconocer de este servicio? Que es el reconocimiento DNS? Bueno, es el proceso de *recolectar información de registros DNS públicos* sobre un dominio objetivo.

Nos permite descubrir información relevante como:

- Direcciones IP de servidores web y de correo.
- Subdominios.
- Infraestructura de correo (Registros *MX*).
- Configuraciones de seguridad (*SPF*, *DKIM*, *DMARC*).
- Servicios asociados a un dominio.

> Esta información es clave para *mapear la superficio de ataque* sin interactuar directamente con el objetivo realizando otros procesos como lo podría ser la enumeración por fuerza bruta de subdominios.

----
# DNS Reconnaissance techniques

1. Consulta de registros básicos.
Herramientas que se pueden utilizar en este punto son: 

- `dig`
- `nslookup` o [NsLookup](https://www.nslookup.io/)
- [DNS Dumpster](https://dnsdumpster.com/)
- [SecurityTrails](https://securitytrails.com)
- [View DNS](https://viewdns.info/)
- [Whois](https://www.whois.com/)
- [WhoIs](https://who.is/)      
- [dnsrecon](https://github.com/darkoperator/dnsrecon)

Ejemplos: 
```bash
# Get all DNS registries known
dig any dobliuw.com 

# Constul NS registry
dig ns dobliuw.com

# Consult MX registry
dig mx dobliuw.com

# Consult TXT registry
dig txt dobliuw.com 
```

2. Enumeración de subdominios (Pasivamente)
Herramientas utilizables para esta tarea (Es importante que algunas herramientas para la obtención de registros podría ser utilizable en este punto):

- [Sublist3r](https://github.com/aboul3la/Sublist3r)
- [Amass](https://github.com/owasp-amass/amass)
- [Crt](https://crt.sh)

- Ejemplo
```bash
# List all subdomains founds with sublist3r
sublist3r -d dobliuw.com

# List all subdomains founds with amass
amass enum --passive -d dobliuw.com
```
