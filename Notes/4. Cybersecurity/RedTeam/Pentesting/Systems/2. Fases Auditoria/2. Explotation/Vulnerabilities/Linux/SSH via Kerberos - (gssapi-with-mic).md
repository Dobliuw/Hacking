# gssapi-with-mic

 La autenticación *GSSAPI* es usada por kerberos, la cual lee de un archivo local del sistema para autenticarse de manera exitosa. 

-----
# Explotación 

Puede darse el caso en el cual al conectarnos a travez de SSH, si usamos la flag **-v** (O ya sea como mensaje de error) podríamos ver esto de **gssapi-with-mic**, lo cual al investigar veríamos que se trata de la configuración de kerberos, entendiendo así que ssh esta usando este metodo de autenticación antes que el tradicional, dandonos la ventaja como atacantes de poder abusar de esto. 

Para esto deberíamos contar con credenciales válidas de kerberos. 

```bash
sudo apt install krb5-user
sudo dpkg-reconifugre krb5-config
# En este punto indicariamos el dominio de kerberos junto a la ip 

sudo nano /etc/krb5.conf
                               
# [libdefaults]
#        default_realm = {domain}
# 
# [realms]
#       {domain} = {
#                kdc = {kdc}
#        }
#
# [domain_realm]
#        .{domain} = {domain}
#        {domain} = {domain}
```

De esta manera, una vez configurado, con la herramienta **klist** podríamos ver que no tenemos nigun ticket almacenado, por lo que haciendo uso de la herramienta **kinit** podríamos indicar un usuario: 

```bash
kinit {username}
```

El cual se resolvera a {username}@{domain} y en caso de ser este válido, nos pedirá la contraseña lo cual al ingresarla, en caso de también ser válida, verémos que con **klist** se nos crea en una ruta un ticket. 

De manera que ahora al volver a autenticarnos con ssh, siendo la conexión **ssapi-with-mic** la primera en probarse, esta leera del archivo creado por **kinit** y nos otorgara acceso al sistema sin proporcionar contraseña. 