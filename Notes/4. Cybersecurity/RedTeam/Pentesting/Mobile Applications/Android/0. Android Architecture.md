# Android Architecture

La *arquitectura de Android* se basa en una combinación de hardware específico y una píla de software que incluye el sistema operativo Android, el cual está basado en el Kernel de Linux, lo que implica que muchas funcionalidades, usos y comportamientos de Linux ([[0. Linux Basics]]) se pueden llevar acabo en este dispositivo.
###### Hardware

- **Processor** (**CPU**):
	- Los teléfonos Android utilizan procesadores basados en arquitecturas *ARM* o, en algunos casos, *x86*.
	- Los procesadores modernos suele ser multinúcleo (quad-core, octa-core) para mejorar el rendimiento y la eficiencia energética.
- **Memory** (**RAM**):
	- Los dispositivos Android viene con varias capacidades de RAM, desde 2GB hata más de 12 GM en los modelos de gama alta.
	- La RAM es crucial para el rendimiento del sistema y la multitarea.
- **Storage**:
	- Incluye almacenamiento interno (*Flash NAND*) y opciones para almacenamiento externo (Tarjetas microSD).
	- La capacidad de almacenamiento varía desde 16GB hasta 1TB o más.
- **Peripherals and Sensors**:
	- Pantalla táctil, cámaras, sensores de proximidad, acelerómetros, giroscopios, GPS, sensores de huellas dactilares, etc.
- **Communication modules**:
	- Wi-Fi, Bluetooth, NFC, LTE/5G, etc.
###### Software

- **Linux Kernel**:
	- El núcleo de Android es una versión modificada del kernel de Linux.
	-  Gestiona recursos de hardware, seguridad y comunicación entre componentes de darware y software.
- **Hardware Abstraction Layer** (**HAL**):
	- Proporciona interfaces estándar para interactuar con el hardware específico del dispositivo.
	- Permite que los fabricantes implementen controladores para su hardware específico.
- **Android Runtime**:
	- *ART* (*Android Runtime*) compila y ejecuta las aplicaciones Android (Cada aplicación se ejecuta en una máquina virtual, esta máquina virtual es *ART*) ART sustituyó a Dalvik en versiones posteriores a Android 4.4 (KitKat), actualmente sigue siendo referenciada con el nombre *Dalvik bytecode*, aunque esta no es utilizada en Android OS modernos.
	- Incluyen bibliotecas de C/C++ usadas por varios componentes del sistema y aplicaciones.
- **Application Frameworks**:
	- Proporciona las APIs y servicios que utilizan las aplicaciones de Android.
	- Incluye gestores de actividades, recursos, notificaciones, entanas, contenidos, etc.
- **System Application**:
	- Conjunto de aplicaciones básicas como el marcador, contactos, navegador, etc.
	- Estas aplicaciones proporcionan funcionalidades esenciales y sirven como referencia para los desarrolladores.
###### Boot Cicle 

- **Bootloader**:
	- Código que se ejecuta al encender el dispositivo.
	- Verifica y carga el kernel de Linux y la imagen del sistema.
- **Linux Kernel**:
	- Inicializa el hardware y monta el sistema de archivos raíz.
	- Iniciael proceso `init`.
- `init` **Process**:
	- Proceso de inicio del sistema que configura y lanza los servicios del sistema Android.
	- Lee los archivos de configuración (*init.rc*) para arracnar los servicios y demonios necesarios.
- **System Services**:
	- Incluyen *Service Manager*, *Zygote*, *System Server* y otros servicios esenciales.
		- **Zygote**: Preinicializa el entorno de ejecución para las aplicaciones Android.
		- **System Server**: INicia y gestiona los serivcios principales del sistema como *Activity Manager*, *Package Manager*, etc.
###### Android in Security

- **Security module based on Linux**:
	- Cada aplicación Android se ejecuta en *su propio proceso* con un ID de usuario único (*UID*), lo que proporciona aislamiento a nivel de proceso.
	- Utiliza mecanismos de control de acceso basados en permisos que deben ser concedidos por el usuario.
- **SELinux** (**Security-Enhanced Linux**):
	- Implementa la política de seguridad obligatorias (*MAC*) para controlar las acciones que puedan realizar los procesos.
- **Sandboxing**:
	- Las aplicaciones se ejecutan en un *entorno aislado* (*Sandbox*) para limitar el acceso no autorizado a los recursos del sistema.

![[android_architecture.png]]
Arquitectura de Android.


- Recursos: 
	- [Documentación Oficial de Seguridad en Android](https://source.android.com/docs/security/overview/app-security). 
	- [Mobile Pentest Gitbook](https://mobile-security.gitbook.io/mobile-security-testing-guide/android-testing-guide/0x05a-platform-overview).

----
# Users

- **Primary User**: Este es el usuario que se crea la primera vez que el dispositivo se incia, siempre esta corriendo y solo puede ser eliminador reseteando el dispositivo de fábrica.
- **Secondary User**: Este es un usuario adiciona que se puede agregar al dispostivivo y solo puede ser agregado o eliminado por el usuario primario.
- **Guest User**: Solo puede haber un usuario invitado a la vez, es una manera rápida de obtener acceso de invitado al dispositivo.
- **Kid Mode**: Google Kids Spaces (Solo en Tablets), Perfiles o cuentas para niños usualmente el fabricante específica el Samsung Kid Mode.