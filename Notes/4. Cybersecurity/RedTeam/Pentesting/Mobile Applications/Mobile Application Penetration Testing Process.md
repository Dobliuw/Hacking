# Process

El proceso para realizar pentesting a aplicaciones móviles es muy similar al que llevamos a cabo en auditorias de pentesting a sistemas, en este caso contamos con cuatro fases, *reconocimiento*, *análisis estático*, *análisis dinámico* y *reporte*. 

----
# Reconnaissance

**Objetivo**: Obtener toda la información posible sobre la aplicación móvil target para entender su estructura, funcionalidad y vectores potenciales de ataque.

**Identify Application Platform**
- Determinar si la aplicación es para Android, iOS o Ambos.
**Collect Basic Information**
- Recolectar información básica, como nombre de aplicación, version, package name (Android), bundle indetifier (iOS), información pública de los desarrolladores, etc.
**Gather Application Resources**
- Obtener archivos *APK* (Android Package) para Android, archivos *IPA* (iOS App Store Package) para iOS.
**Network Traffic Analysis**
- Capturar tráfico de red haciendo uso de herramientas como `wireshark` o `tcpdump`.
- Identificar *endpoints* de *API*, *protocolos de comunicación* utilizados y *métodos* de *transmisión de datos*.
**Review Documentation**
- Análizar la descripción de la app en la tienda, reviews de usuarios y documentación de desarrolladores de ser posible.
- Identificar funcionalidades anunciadas y quejas o problemas conocidos y reportados.
# Static Analysis

**Objetivo**: Analizar la aplicación sin ejecutarla para identificar potenciales fallas de seguridad en el código y/o de configuración.

**Decompile/Disassemble**
- Hacer uso de herramientas como `JADX`, `APKTool` (Para Android), o `IDA PRO`, `Hopper` (Para iOS) para decompilar las apps.
- Extraer código fuente y recursos para análizar.
**Review Source Code**
- Hacer búsqueda de *secrets*, *credenciales* y *API keys*.
- Identificar prácticas inseguras de código como el manejo inadecuado de errores, falta de validación de entradas, etc.
**Analyze Configuration Files**
- Inspeccionar *AndroidManifest.xml* (En Android) o *Info.plist* (En iOS) para búsqueda de información sensible y de permisos.
- Asegurarse de que los permisos apropiados son requeridos de manera adecuada y minimizar la superficie de ataque.
**Check for Vulnerable Libraries**
- Identificar el uso de librerías externas y revisar por vulnerabilidades conocidas haciendo uso de herramientas como *Retire.js* o *Snyk*.

![[static_analysis_mobile_pentesting.png]]

# Dynamic Analysis

**Objetivo**: Interactucar con la aplicación en un entorno en tiempo real para identificar vulnrabilidades que no aparecen en el análisis estático.

**Set Up Testing Enviroment**
- Hacer uso de emuladores o dispositivos reales con el debugging ativado.
- Configurar herramientas de proxy como `BurpSuite`, `OWASP ZAP` o `proxyman` para interceptar y análizar el tráfico.
**Runtime Behavior Analysis**
- Supervisar el comportamiento de la aplicación haciendo uso de herramientas como `Frida` o `Xposed Framework`. 
- Identificar almacenamiento inseguro de datos, manejo de sesiones inapropiados y accesos no autorizados.
**API Testing**
- Interceptar y modifcar los request y respuestas a la API para búsqueda de vulnerabilidades típicas como [[SQLI - (SQL Injections)]], [[NoSQLI - (NoSQL Injections)]], [[XSS  - ( Cross-Site Scripting )]], entre otras.
**Testing for Binary Protections**
- Revisar por implementaciones de protección como *obfuscation*, *tamper detecion* y *root/jailbreak detection*. 
**Exploit Testing**
- Intentar explotar las vulnerabilidades encontradas para confirmar su presencia y impacto potencial.

# Reporting

**Objetivo**: Documentar las vulnerabilidades encontradas, el posible impacto de estas y proveer recomendaciones para la remediación.

**Executive Summary**
- Proveer una descripción *high-level* sobre los hallazgos, la evaluación general de riesgos y las recomendaciones claves.
**Datailed Findings**
- Documentar cada vulnerabilidad con:
	- Descripción de la falla o problema.
	- Pasos para reproducir a la misma.
	- Evidencia (*Screenshots*, *framentos de código*, *logs*, etc).
	- Evaluación de impacto.
	- Puntaje de CVSS (Si aplica). 
**Remediation Recommendations**
- Proveer pasos accionables para solventar cada vulnerabilidad o problema hayado.
- Sugerir mejores practicas para un desarrollo seguro.
**Risk Assassment**
- Evaluar la postura de seguridad general de la aplicación.
- Priorizar las vulnerabilidades en función de su impacto y probabilidad de explotación.
**Appendices**
- Incluir datos como revisiones completas del código, registros de tráfico de red o resultados detallados de las herramientas utilizadas.