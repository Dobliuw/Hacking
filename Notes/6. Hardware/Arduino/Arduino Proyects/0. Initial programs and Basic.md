# Arduino code

Como se menciono previamente en apuntes como [[0. Arduino y Componentes electrónicos]], para brindarle instrucciones al microcontrolador haremos uso del editor de texto de la [IDE de Arduino](https://www.arduino.cc/en/software) en donde podremos tener un manejo y contacto más avanzado con la placa. Las instrucciones las escribiremos en un lenguaje de programación muy similar a una mezcla de C y C++.
# First Steps

Es muy importante entender la distribución de nuestro código en el IDE, ya que tras entrar nos encontraremos con dos funciones ya declaradas, por un lado `void setup();` y por otro lado `void loop();`. 

- `setup`: En la función *setup* ingresaremos el código que se ejecutará una única vez al inicio del programa y se utiliza para realizar las configuraciones iniciales en nuestra placa. Aquí se incluyen tareas como la inicialización de pines de entrada y salida, configuración de comunicaciones seriales, inicialización de variables, entre otras.
	- Ejemplo: 
```C
void setup(){
	// put your setup code here, to run once:
	digitalWrite(13, OUTPUT);
	// Initialize the pin 13 to handle a LED
}
```
- `loop`: La función *loop* es el corazón del programa en Arduino. Después de que la función *setup* se ejecuta una vez al inicio, la función *loop* se ejecuta repetidamente en un ciclo continuo mientras la placa esté encendida. En esta función se incluye el código que queremos que se ejecute de manera continua, como la lectura de sensores, la actualización de salidas, la comunicación con otros dispositivos, entre otras tareas.
	- Ejemplo:
```C
void loop(){
	digitalWrite(13, HIGH); // Turn ON the LED
	delay(1000); // Wait 1 second
	digitalWrite(13, LOW); // Turn OFF the LED
	delay(1000); // Wait 1 second
}
```

Para comenzar a programar y realizar acciones con nuestra placa es muy importante tener a mano el manual con la [asignación de pines](https://docs.arduino.cc/resources/pinouts/A000066-full-pinout.pdf) realizada por Arduino.
###### Pulse Width Modulation (PWM)

La *Modulación por Ancho de Pulso* (*PWM*) o *Pulse Width Modulation* es una técninca utilizada para controlar la cantidad de energía entregada a un dispositivo electrónico mediante la variación del ancho de un pulso de señal digitial. La principal aplicación de PWM es controlar la potencia entregada a dispositivos que no pueden funcionar a plena potencia todo el tiempo, como motores, LEDs o válvulas solenoides. AL variar e lciclo de trabajo de la señal PWM, podemos variar la cantidad de potencia entregada aal dispositivo y, por lo tanto, su velocidad, birllo o posición.

En el caso de Arduino y otros microcontroladores, los pines designados como PWM son capaces de generar señales PWM mediante hardware, lo que facilita su uso para controlar dispostivios analógicos con una alta presición y eficiencia. Los pintes PWM en Arduino contienen un ~ delante del número.
###### digitalWrite() vs analogWrite()

Estas son funciones con el mismo proposito en el manejo de Arduino pero con unas diferencias importantes a tener en cuenta.

- **digitalWrite**: 
	- Esta función se utiliza para controlar los pines digitales del Arduino.
	- Solo puede emitir dos niveles de voltaje: 0 voltios (*LOW*) o 5 voltios (*HIGH*).
	- Es útil para encender o apagar componentes que solo necesitan dos estados, como LEDs o relés.
- **analogWrite**:
	- A diferencia de *digitalWrite*, esta se utiliza para controalr pines PWM del Arduino.
	- PWM no genera realmente un señal analógica, sino que simula una señal analógica mediante la rápida conmutación entre dos estados: encendido y apagado. En caso de querer tener una señal analógica real en lugar de una simulada deberiamos hacer uso de un DAC.
	- Permite controlar la cantidad de tiempo que el pin está en estado "encendido" (*HIGH*) duante cada ciclo de PWM.
	- El segundo parámetro de esta función acepta valores entre 0 y 255, lo que corresponde al ciclo de trabajo de PWM.
	- El valor de *0* significa que el pin está siempre apagado (0% del ciclo de trabajo), mientras que un valor de *255* significa que el pin está siempre encendido (100% del ciclo de trabajo).
	- Los valores intermedios entre 0 y 255 ajustan la proporción de tiempo que el pin está encendido en cada ciclo, lo que permite controlar la cantidad de voltaje promedio entregado al dispositivo conectado al pin.
	- Es útil para controlar la intensidad luminosa de LEDs, la velocidad de motores DC, entre otros dispositivos que puede ser controaldos con señal PWM.

-----
# Baud rates

Los *baurd rates* o *baudios* son una medida de la velocidad de transmisión de datos en una comunicación serie. Se refieren a la cantidad de símbolos (bits) que podrían llegar a ser tranmisitidos por segundo a través de un canal de comunicación, pero esto no quiere decir que necesariamente estos sean tranmisitidos.
La cantidad de baud rates indicados en funciones como `Serial.begin()` esta relacionado a la capacidad de intercambio de datos que se quiere tener respecto de un dispositivo, y los valores más comunes que se suele ver son **9600**, **115.200**, **576.000**, etc.

---
# Serial

La comunicación serial es un método de transferencia de datos en el que los bits de datos se ecnvián secuencialmente uno tras otro a través de un único canal de comunicación. En arduino, la comuinicación serial se utiliza para enviar y recibir datos entre la placa Arduino y otros dispositivos, como sensores, actuadores o un ordenador.

La comunicación serial en Arduino es realizada a través de los pines digitales, específicamente los pines *RX* (Recepción) y *TX* (Transmisión) y hacer uso de este tipo de comunicación requerira el uso de una clase llamada **Serial** la cual haciedno uso de métodos nos proporcionara una interfaz para comunicarnos a través del puerto serie (UART) de la placa. 

Esta clase incluye métodos para configurar la comunicación serial, enviar y recebier datos, y realizar otras operaciones relacionadas con la comunicación serial, por ejemplo:

- `.begin(baudRate)`: Inicia la comunicación serial con el baud rate especificado.
- `.print(data)`: Envía datos al puerto serie en forma de caracteres ASCII.
- `.println(data)`: Envía datos al puerto serie seguidos de un salto de línea.
- `.available()`: Devuelve el número de bytes disponibles para leer en el búfer de recepción.
- `.read()`: Lee el siguiente byte de datos del búfer de recepción.
- `.write(data)`: Evnía un byte de datos al puerto serie. 

---
# Buzzers

Un buzzer como sabemos es un dispositivo electromecánico que porduce un sonido cuando se le aplica una corriente eléctrica. Consiste en un oscilador electromagnético que genera vibraciones audibles cuando se activa. 

Los buzzers se utilizan en una variedad de aplicaciones, tanto en proyectos electrónicos como en dispositivos de uso cotidiano, por ejemplo:

- Señales de advertencia.
- Indicadores de estado.
- Señales de retroalimentación.

Para hacer uso de estos dispositivos podemos hacer uso de la función `tone()` o simplemente emitir una señal de 5V y alterar el tiempo entre que se emite esta señal, se deja de emitir y se vuelve a realizar esta acción en bucle según cuando sea necesaria, para esto hay que tener en cuenta que existen distintos tipos de buzzers como los activos, pasivos y estos varian la capacidad de tonos que puede alcanzar. 

----
# Photoresistors

Un sensor de luz, también conocido como fotodetector o fotocélula, es un dispositivo que detecta la intensidad de la luz en su entorno y convierte esta finformación en una señal eléctrica proporcional. Estos sensores son comunes en una variedad de aplicaciones y se utilizan para automatizar sistemas de iluminación, controlar la exposición en cámaras fotográficas, medir la luz ambiental en dispostivos electrónicos y mucho más. 

La mayoria de estos, cuando la luz es muy alta, la resistencia aumenta dando por consecuencia una menor cantidad de voltaje y ocacionando la inverso cuando la luz se apaga o se reduce.

----
# Pushbuttons y Pull Up / Pull Down Resistors.

Un **pushbutton**, o **botón pulsador**, es un componente electromecánico simple que se utiliza para arbrir o cerrar un circuito eléctrico temporalmente cuando se presional. Consiste en un botón que se presiona para establecer una conexión eléctrica y se suelta para romper esa conexión.

El botón pulsador típicamente tiene dos terminales o pines, uno conectado a una línea de voltaje (VCC) y otro conectado a una línea de tierra (GND) o a un pin de entrada/salida de un microcontrolador. Cuando se utiliza el botón pulsador con un microcontrolador, es común utilizar resistencias de pull-up o pull-down para garantizar un funcionamiento correcot y estable del circuito.
###### Pull Up Resistor

Se coloca una resistencia entre la línea de voltaje (VCC) y el pin del botón pulsador que se conecta al microcontrolador. Esto asegura que el pin del microcontrolador esté en un estado lógico alto (HIGH) cunado el botón no está presionado. Cuando se presiona el botón, se cierra el circuito y el pin del microcontrolador se conecta a tierra (GND), estableciendo un estado lógico bajo (LOW). 

![[pull_up_resistor_electronic.png|1200]]
###### Pull Down Resistor

Se coloca una resistencia entre el pin del botón pulsador y la línea de tierra (GND). Esto asegura que el pin del microcontrolador esté en un estado lógico bajo (LOW) cuando el botón no está presionado. Cuando se presiona el botón, se cierra el circuito y el pin del microcontrolador se conecta a la línea de voltaje (VCC), estableciendo un estado lógica alto (HIGH).

![[pull_down_resistor_electronic.png|1200]]