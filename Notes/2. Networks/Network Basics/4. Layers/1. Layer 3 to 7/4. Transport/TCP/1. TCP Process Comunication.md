# TCP Server Process

Ya conocemos los fundamentos del protocolo TCP como vimos en el artículo [[0. Transport Control Protocool - (TCP)]]. Comprender el papel de los *números de puerto* (Como vimos en [[1. Port Numbers]]) nos ayudará a comprender los detalles del proceso de comunicación TCP. En este aratículo, cubriremos y aprenderemos acerca de los procesos de *Three Way Handshake* TCP y *terminación de sesión*.

Cada proceso de aplicación que se ejecuta en el servidor utiliza un número de puerto. El número de puerto es asignado automáticamente o configurado manualmente por un administrador del sistema.

Un servidor individual no puede tener dos servicios asignados al mismo número de puerto dentro de los mismos servicios de la capa de transporte. Por ejemplo, un host que ejecuta una aplicación de servidor web y una aplicación de transferencia de archivos no puede tener ambos configurados para usar el mismo puerto, como el puerto TCP 80.

Una aplicación de servidor activa asignada a un puerto específico se considera abierta, lo que significa qeu la capa de transporte acepta y procesa los semgnetos dírigidos a ese puerto. Toda solicitud entrante de un cliente direccionada al socket correcto es aceptada y los datos se envían a la aplicación del servidor. Pueden existir varios puertos abiertos simultáneamente en un servidor, uno para cada aplicación de servidor activa. 
#### TCP Request sended by Client

El *Cliente 1* está solicitando servicios web y el *Cliente 2* está solicitando un servicio de correo electrónico del mismo servidor.

![[Pasted image 20241129180236.png]]
#### Request for Destination Ports

El cliente genera una solicitud a un número de puerto de destino asociado al servicio o aplicación que esta en uso. En el caso de solicitar una página web generara un solicitud con un puerto de destino de número de puerto *80* y en el caso del Cliente 2 que solicita un correo electrónico genera una solicitud con un puerto de destino *25*.

![[Pasted image 20241129180353.png]]
#### Request for Source Ports 

Las solicitudes generan dinámicamente un número de puerto de origen. En este caso, el cliente 1 está utilizando el puerto de origen *49.152* y el cliente 2 está utilziando el puerto de origen *51.152*.

![[Pasted image 20241129180517.png]]
#### Response from Destination Ports

Cuando el servidor responde a las solicitudes del cliente, invierte los puertos de destino y origen de la solicitud inical. Observemos que la respuesta del servidor a la solicitud web ahora tiene el puerto de destino *49.152* y la respuesta correo electrónico ahora tiene el puerto de destino *51.152*.

![[Pasted image 20241129180654.png]]
#### Response from Source Ports

El puerto de origen en la respuesta del servidor es el puerto de destino original en las solicitudes iniciales.

![[Pasted image 20241129180814.png]]